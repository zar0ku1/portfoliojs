/*
 * Portfolio.js v1.0
 * jQuery Plugin for Portfolio Gallery
 * http://portfoliojs.com
 *
 * Copyright (c) 2012 Abhinay Omkar (http://abhiomkar.in) @abhiomkar
 * Licensed under the MIT License:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Dependencies
 *  - jQuery: http://jquery.com
 *  - jQuery easing: http://gsgd.co.uk/sandbox/jquery/easing
 *  - jQuery touch swipe: http://labs.skinkers.com/touchSwipe
 *  - jQuery imagesLoaded: http://desandro.github.com/imagesloaded
 *  - jQuery scrollTo: http://flesler.blogspot.in/2007/10/jqueryscrollto.html
 *  - JS Spin: http://fgnass.github.com/spin.js

 * */(function(e){e.fn.radium_gallery_h=function(t){var n={autoplay:!1,firstLoadCount:4,enableKeyboardNavigation:!0,loop:!1,easingMethod:"easeOutQuint",height:"500px",width:"100%",lightbox:!1,showArrows:!0,logger:!0,showThumbnails:!1,showScrollbar:!0};e.extend(this,n,t);var r=this,i=this,s,o=0,u=6,a=!1;e.extend(this,{version:"0.2",init:function(){r.scrollToOptions={axis:"x",easing:r.easingMethod,offset:-4};e(window).width()<=700&&(r.height="200px");e(this).css({width:r.width,"max-height":r.height,"overflow-x":"scroll","overflow-y":"hidden","white-space":"nowrap"});e(this).find("img").css({display:"inline-block","max-width":"none",height:r.height,width:"auto"});e(this).find("img").css("display","none");e(this).find("img").attr("loaded","false");e(this).find("img").first().attr("first","true").css({"margin-left":"5px"});e(this).find("img").last().attr("last","true").css({"margin-right":"6px"});r.spinner.show("100%");r.loadNextImages(r.firstLoadCount);e(this).find("img").first().addClass("active");if(r.lightbox){e(i).find("img").not(".active").animate({opacity:"0.2"});e(i).find("img.active").animate({opacity:"1"});e(i).css({"overflow-x":"hidden"})}r.showScrollbar||e(i).css({"overflow-x":"hidden"});r.showArrows&&r.navigation.show();r.showThumbnails&&r.thumbnails.show();e(".gallery-blank-space").css({position:"absolute",width:"5px",height:r.height});e(this).swipe({swipeLeft:function(){r.next()},swipeRight:function(){r.prev()}});e(this).find("img").on("movestart",function(e){f.log("movestart");(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)&&e.preventDefault()});e(this).find("img").click(function(t){e(i).find("img.active")[0]===e(this)[0]?r.next():r.slideTo(e(this));console.log(e(this))});e(this).scroll(function(){e(i).find("img").last().attr("loaded")==="true"&&e(".gallery-blank-space").css({left:e(i).find("img").last().data("offset-left")+e(i).find("img").last().width()+"px"});if((i[0].offsetWidth+i.scrollLeft())*100/i[0].scrollWidth>60&&o<e(i).find("img").length){f.log("scroll(): loading some more images");r.loadNextImages(6)}});e(window).resize(function(){if(e(window).width()<=700&&e(i).find("img").first().height()!==200){e(i).css({height:"200px"});e(i).find("img").css({height:"200px"});e(i).find(".gallery-arrow-left, .gallery-arrow-right").css({height:"200px"})}else if(e(window).width()>700&&e(i).find("img").first().height()===200){e(i).css({height:r.height});e(i).find("img").css({height:r.height});e(i).find(".gallery-arrow-left, .gallery-arrow-right").css({height:r.height})}})},next:function(){var t=e(i).find("img.active"),n=e(i).find("img.active").next();if(e(t).attr("last")==="true")if(r.loop){f.log("last","loop: on");e(i).scrollTo(0,500,r.scrollToOptions);e(i).find("img").removeClass("active").first().addClass("active");if(r.lightbox){e(i).find("img").not(".active").animate({opacity:"0.2"});e(i).find("img.active").animate({opacity:"1"})}}else f.log("last","loop: off");else if(e(n).attr("loaded")==="true"){e(i).scrollTo(n,600,r.scrollToOptions);e(i).find("img").removeClass("active");e(n).addClass("active");if(r.lightbox){e(i).find("img").not(".active").animate({opacity:"0.2"});e(i).find("img.active").animate({opacity:"1"})}}else e(n).attr("loaded")==="false"&&f.log("next images are being loaded...");f.log("next: current viewing image",e(i).find("img.active"))},prev:function(){var t=e(i).find("img.active"),n=e(i).find("img.active").prev();if(e(t).attr("first")!=="true"&&n){e(i).scrollTo(n,500,r.scrollToOptions);e(i).find("img").removeClass("active");e(n).addClass("active");if(r.lightbox){e(i).find("img").not(".active").animate({opacity:"0.2"});e(i).find("img.active").animate({opacity:"1"})}}f.log("prev: current viewing image",e(i).find("img.active"))},slideTo:function(t){e(i).scrollTo(t,500,r.scrollToOptions);e(i).find("img").removeClass("active");e(t).addClass("active");if(r.lightbox){e(i).find("img").not(".active").animate({opacity:"0.2"});e(i).find("img.active").animate({opacity:"1"})}},spinner:{remove:function(){e(i).find(".spinner-container").remove()},show:function(t){r.spinner.remove();var n=e(i).find("img[loaded=true]").last();e(i).append('<span class="spinner-container"></span>');e(i).find(".spinner-container").css({display:"inline-block",height:r.height,width:t,"vertical-align":"top"});var s={lines:17,length:4,width:2,radius:5,corners:1,rotate:0,color:"#000",speed:1.5,trail:72,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:parseInt(r.height)/2,left:"auto"},o=(new Spinner(s)).spin(e(i).find(".spinner-container")[0])}},loadNextImages:function(t){if(!a){var n;n=e(i).find("img[loaded=false]").slice(0,t);e(n).each(function(t){var n=this;n.src=e(n).data("src");e(n).attr("loaded","loading")});e(n).imagesLoaded(function(t){f.log("images loaded:");f.log(t);t.each(function(t){var n=this;e(n).css({display:"none"});r.spinner.remove();e(n).fadeIn("slow");img_width=e(n).width();o+=1;e(n).data("width",img_width);e(n).attr("loaded","true")});r.spinner.show("100px");a=!1;o===e(i).find("img").length?r.spinner.remove():i[0].offsetWidth===i[0].scrollWidth&&r.loadNextImages(6)});a=!0}},navigation:{show:function(){if(r.navigation.created){e(".gallery-arrow-left, .gallery-arrow-right").show();e(".gallery-arrow-left, .gallery-arrow-right").delay(6e3).fadeOut()}else{e(i).before('<span class="gallery-arrow-left"></span>').after('<span class="gallery-arrow-right"></span>');e(i).prev(".gallery-arrow-left").css({position:"absolute",left:"8px",height:r.height,width:"50px","z-index":"9999",opacity:"0.5"});e(i).next(".gallery-arrow-right").css({position:"absolute",right:"0",top:e(i).position().top,height:r.height,width:"50px","z-index":"9999",opacity:"0.5"});e(i).prev(".gallery-arrow-left").click(function(e){r.prev()});e(i).next(".gallery-arrow-right").click(function(e){r.next()});e(".gallery-arrow-left, .gallery-arrow-right").hover(function(){e(this).css({opacity:"1"})},function(){e(this).css({opacity:"0.5"})});e(i).mousemove(function(){r.navigation.show()});e(".gallery-arrow-left, .gallery-arrow-right").delay(6e3).fadeOut();r.navigation.created=!0}},hide:function(){e(".gallery-arrow-left, .gallery-arrow-right").fadeOut()},created:!1},thumbnails:{show:function(){if(!r.thumbnails.created){e(i).parent().after('<div class="gallery-thumb-navigation"></div>');var t=e(i).html();e(".gallery-thumb-navigation").html(t);var n=["src","alt","data-index"];e(".gallery-thumb-navigation img").each(function(t){var r=e(this).data("src");e(this).attr({src:r});var i=this.attributes,s=i.length;while(s--){var o=i[s];e.inArray(o.name,n)==-1&&this.removeAttributeNode(o)}e(this).css({cursor:"pointer"})});e(".gallery-thumb-navigation .spinner-container").remove();r.thumbnails.created=!0}e(".gallery-thumb-navigation img").click(function(t){var n=e(this).data("index"),s=e(i).find("[data-index='"+n+"']");e(i).find("img.active")[0]===s[0]?r.next():r.slideTo(s);f.log("scroll via thumbnail")})},hide:function(){e(".gallery-thumb-nav").fadeOut()},created:!1}});this.enableKeyboardNavigation&&e(document).keydown(function(t){var n=t.charCode?t.charCode:t.keyCode?t.keyCode:0;switch(n){case 73:r.slideTo(e(i).find("img").first());break;case 65:r.slideTo(e(i).find("img").last());break;case 75:case 37:r.navigation.hide();r.prev();t.preventDefault();break;case 39:r.navigation.hide();r.next();t.preventDefault()}});var f={log:function(){if(this.active)for(var e=0,t=arguments.length;e<t;e++)console.log(arguments[e])},active:r.logger};return this}})(jQuery);